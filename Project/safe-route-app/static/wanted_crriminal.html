<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>My Safety â€“ Wanted (Standalone)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{
      --bg:#0b1220;--card:#0f172a;--text:#e5e7eb;--muted:#9ca3af;--border:#23314d;--accent:#22c55e;--accent2:#38bdf8;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    h1{margin:0 0 16px;font-size:26px}
    .controls{display:flex;gap:8px;margin-bottom:16px}
    input,button{border:1px solid var(--border);border-radius:8px;padding:10px 12px;background:#0f172a;color:var(--text)}
    button{background:#1f2937;cursor:pointer}
    button:hover{background:#2b3647}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden}
    .card img{width:100%;height:180px;object-fit:cover;display:block}
    .card .p{padding:12px}
    .badge{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid #7f1d1d;background:#3f1515;color:#fca5a5}
    .muted{color:var(--muted);font-size:14px}
    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:50}
    .modal{background:#111827;border:1px solid var(--border);border-radius:16px;max-width:720px;width:92%;overflow:hidden}
    .modal header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border);padding:12px 16px}
    .modal .body{padding:16px}
    .row{display:grid;grid-template-columns:1fr 2fr;gap:16px}
    .img{width:100%;height:200px;border-radius:12px;object-fit:cover}
    .btn{padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#1f2937;color:var(--text);cursor:pointer}
    .btn:hover{background:#2b3647}
    .btn-accent{background:var(--accent);color:#0b1220;border:none}
    .field{display:flex;gap:8px}
    .field input{flex:1}
    .stack{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .hidden{display:none}
    label.checkbox{display:flex;align-items:center;gap:8px;font-size:14px;margin-top:8px}
    input[type="checkbox"]{width:16px;height:16px}
  </style>
</head>
<body>
  <div class="container">
    <h1>Wanted Criminals</h1>
    <div class="controls">
      <input id="searchWanted" placeholder="Search name, crime, areaâ€¦">
      <button id="refreshWanted">Refresh</button>
    </div>
    <div id="wantedGrid" class="grid"></div>
  </div>

  <!-- Modal -->
  <div id="backdrop" class="modal-backdrop">
    <div class="modal">
      <header>
        <h2 id="modalTitle" style="margin:0;font-size:18px">Details</h2>
        <button id="closeModal" class="btn">Close</button>
      </header>
      <div id="modalBody" class="body"></div>
    </div>
  </div>

  <script>
    "use strict";

    // Data (with age, height_cm, complexion)
    const wantedData = [
      {
        id:1,
        name:"Rahim Uddin",
        photo_url:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=800&auto=format&fit=crop",
        crimes:["Robbery","Extortion"],
        last_seen_location:"Mirpur, Dhaka",
        last_seen_time:"2025-09-25T18:30:00",
        reward:50000,
        note:"Considered dangerous.",
        age:32,
        height_cm:175,
        complexion:"Wheatish"
      },
      {
        id:2,
        name:"Tariq Hasan",
        photo_url:"https://images.unsplash.com/photo-1542202229-7d93c33f5d07?q=80&w=800&auto=format&fit=crop",
        crimes:["Fraud"],
        last_seen_location:"Agrabad, Chattogram",
        last_seen_time:"2025-09-20T14:10:00",
        reward:20000,
        note:"Drives a black sedan.",
        age:40,
        height_cm:168,
        complexion:"Fair"
      },
      {
        id:3,
        name:"Unknown Alias 'Blue'",
        photo_url:"https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?q=80&w=800&auto=format&fit=crop",
        crimes:["Burglary"],
        last_seen_location:"Uttara, Dhaka",
        last_seen_time:"2025-09-28T05:45:00",
        reward:0,
        note:"Seen near construction sites.",
        age:29,
        height_cm:180,
        complexion:"Dark"
      }
    ];

    // Helpers
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    const fmt = dt => dt ? new Date(dt).toLocaleString() : "";

    function fillWithGeo(input){
      if(!navigator.geolocation){ alert("Geolocation not supported."); return; }
      navigator.geolocation.getCurrentPosition(
        pos => { input.value = `${pos.coords.latitude.toFixed(6)}, ${pos.coords.longitude.toFixed(6)}`; },
        err => alert("Unable to get location: " + err.message),
        {enableHighAccuracy:true, timeout:10000}
      );
    }

    // Cards
    function card(item){
      const el = document.createElement("div");
      el.className = "card";
      el.innerHTML = `
        <img src="${item.photo_url}" alt="${item.name}">
        <div class="p">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
            <div style="font-weight:600">${item.name}</div>
            <span class="badge">Wanted</span>
          </div>
          <div class="muted">Last seen: ${item.last_seen_location} Â· ${fmt(item.last_seen_time)}</div>
          <div class="stack">
            <button class="btn show">Show details</button>
          </div>
        </div>`;
      el.querySelector(".show").addEventListener("click",()=>openModal(item));
      return el;
    }

    function render(list){
      const grid = $("#wantedGrid");
      grid.innerHTML = "";
      list.forEach(it => grid.appendChild(card(it)));
    }

    // Modal
    function openModal(item){
      $("#modalTitle").textContent = item.name + " â€” Details";
      $("#modalBody").innerHTML = `
        <div class="row">
          <img src="${item.photo_url}" class="img" alt="${item.name}">
          <div>
            <p><b>Crimes:</b> ${item.crimes.join(", ")}</p>
            <p><b>Last seen:</b> ${item.last_seen_location} at ${fmt(item.last_seen_time)}</p>
            <p><b>Reward:</b> à§³${item.reward.toLocaleString()}</p>
            <p><b>Age:</b> ${item.age} yrs</p>
            <p><b>Height:</b> ${item.height_cm} cm</p>
            <p><b>Complexion:</b> ${item.complexion}</p>
            <p class="muted">${item.note || ""}</p>

            <div class="stack">
              <button id="seenBtn" class="btn-accent btn">I have seen this person</button>
            </div>

            <div id="seenWrap" class="hidden" style="margin-top:12px;padding:12px;border:1px solid var(--border);border-radius:12px;background:#0f172a">
              <div style="font-weight:600;margin-bottom:8px">Report Last Seen (Notifies police)</div>
              <div class="field" style="margin-bottom:8px">
                <input id="seen_time" type="datetime-local">
              </div>
              <div class="field">
                <input id="seen_location" placeholder="Type address or use my location">
                <button id="geoSeen" class="btn">Use my location</button>
              </div>
              <label class="checkbox">
                <input id="still_with_finder" type="checkbox">
                <span>Still with finder (currently being held by the person who found them)</span>
              </label>
              <div style="text-align:right;margin-top:10px">
                <button id="submitSeen" class="btn" style="background:var(--accent2);border:none;color:#0b1220">Send Notification</button>
              </div>
            </div>
          </div>
        </div>`;
      $("#backdrop").style.display = "flex";
      $("#seenBtn").onclick = ()=> $("#seenWrap").classList.toggle("hidden");
      $("#geoSeen").onclick = ()=> fillWithGeo($("#seen_location"));
      $("#submitSeen").onclick = ()=>{
        const payload = {
          criminal_id: item.id,
          last_seen_time: $("#seen_time").value,
          last_seen_location: $("#seen_location").value,
          still_with_finder: $("#still_with_finder").checked
        };
        alert("ðŸš“ Notification sent to police with your sighting.\n\n" + JSON.stringify(payload,null,2));
        closeModal();
      };
    }
    function closeModal(){ $("#backdrop").style.display = "none"; }
    $("#closeModal").addEventListener("click", closeModal);
    $("#backdrop").addEventListener("click", e=>{ if(e.target.id==="backdrop") closeModal(); });

    // Search
    function filterItem(it){
      const q = $("#searchWanted").value.trim().toLowerCase();
      if(!q) return true;
      return it.name.toLowerCase().includes(q) ||
             it.last_seen_location.toLowerCase().includes(q) ||
             it.crimes.join(" ").toLowerCase().includes(q);
    }
    $("#searchWanted").addEventListener("input", ()=> render(wantedData.filter(filterItem)));
    $("#refreshWanted").addEventListener("click", ()=> render(wantedData.filter(filterItem)));

    // First render
    render(wantedData);
  </script>
</body>
</html>